# Devices-Auth
デバイス認証クラス

## 概要
開発者自身しか使うことなく外部サービスに公開しないアプリを共有PCで使用する可能性があるものについては
起動時にデバイス認証が必要となる。認証に失敗した場合は何らかのエラーメッセージを出し終了する。

> [!IMPORTANT]
> 2025年以降は原則全てのアプリにデバイス認証機能を加える。
> また、認証デバイスが変わった際の更新ビルド漏れを防ぐ狙いとして全てのアプリにビルドから1年間のサポート期間を設ける。
> 認証はデバイスの製造番号（シリアル番号）やデバイスインスタンスパスをもとに行う。

## 対応言語
* C#
* C++
* Delphi

## 認証に使用される製造番号の種類
### ハードウェア
* PC（BIOS/UEFIのファームウェアの識別番号）
* マザーボード
* 補助記憶装置（SATA, mSATA,又はM.2 接続形式のHDD又はSSD）
* 外部記憶装置（USBメモリー，SDカード，外付けHDD又は外付けSSD）
* MACアドレス（C#のみ）

### ソフトウェア
* Windowsのシリアル番号
* ユーザーアカウントのSID（セキュリティ識別子）

## デバイス認証の成功条件（次のいずれか）
1. メインPCかサブPC上で実行（無条件で認証成功）
2. 指定のリムーバブルディスクが挿入され且つ認識されている  
**＊２の条件のみ満たした状態で認証デバイスを取り外すと強制終了となる。**


## 暗号化（C#のみ）
製造番号を平分で記述すると逆アセンブルで解析される恐れがある。

解析を防ぐため製造番号は平分で記述するのではなく暗号化された定義ファイルに
製造番号を含むデバイスの情報を格納することで解析を防ぐことができる。
